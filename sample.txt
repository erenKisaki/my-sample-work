    private static byte[] convertToPNG(byte[] imageBytes) throws IOException {
        ByteArrayInputStream bais = new ByteArrayInputStream(imageBytes);
        BufferedImage originalImage = ImageIO.read(bais);
        if (originalImage == null) {
            throw new IOException("Invalid or unsupported image format.");
        }

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        ImageIO.write(originalImage, "png", baos);
        return baos.toByteArray();
    }
