import org.json.JSONObject;
import java.nio.file.Files;
import java.nio.file.Paths;

public static void processFiles(File dir, String regionName) {
    Map<String, JSONObject> adapters = new HashMap<>();
    Map<String, JSONObject> policies = new HashMap<>();
    Map<String, JSONObject> datastores = new HashMap<>();
    Map<String, JSONObject> selectors = new HashMap<>();

    for (File file : dir.listFiles()) {
        if (file.isDirectory()) {
            processFiles(file, regionName);
        } else {
            if (file.getName().endsWith(".json")) {
                try {
                    String content = new String(Files.readAllBytes(Paths.get(file.getAbsolutePath())));
                    JSONObject jsonObject = new JSONObject(content);

                    if (file.getAbsolutePath().contains("adapters/" + regionName)) {
                        adapters.put(file.getName(), jsonObject);
                    } else if (file.getAbsolutePath().contains("policies/" + regionName)) {
                        policies.put(file.getName(), jsonObject);
                    } else if (file.getAbsolutePath().contains("datastores/" + regionName)) {
                        datastores.put(file.getName(), jsonObject);
                    } else if (file.getAbsolutePath().contains("selectors/" + regionName)) {
                        selectors.put(file.getName(), jsonObject);
                    }
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }

    // Print the HashMaps to verify
    if (adapters.size() > 0) {
        System.out.println("Adapters for " + regionName + ": " + adapters);
    }
    if (policies.size() > 0) {
        System.out.println("Policies for " + regionName + ": " + policies);
    }
    if (datastores.size() > 0) {
        System.out.println("Datastores for " + regionName + ": " + datastores);
    }
    if (selectors.size() > 0) {
        System.out.println("Selectors for " + regionName + ": " + selectors);
    }

    // Iterate over the map and get the JSON file and call the service
}
